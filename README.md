Flutter easy localization
===============

**flappy_translator package**: https://pub.dev/packages/flappy_translator

• **files and folders**
```dart
Project
+-- lib
|    +-- i18n   
|        +-- i18n.dart
|    +-- main.dart
+-- trads.csv

```
• **i18n.dart**
This fil is generated by this command line : 
```shell
> flutter pub run flappy_translator trads.csv lib/i18n/
```
```dart
import 'dart:async';

import 'package:flutter/material.dart';

/// This class is generated by flappy_translator package
/// You should never change something directly in this file but, instead, generate new file when needed with the package
class I18n {
  String get title => _getText("title");

  String get hello => _getText("hello");

  I18n(Locale locale) {
    this._locale = locale;
    _localizedValues = null;
  }

  Locale _locale;

  static Map<String, String> _localizedValues;

  static Map<String, String> _enValues = {
    "title": "Hello world App from US",
    "hello": "Hello",
  };

  static Map<String, String> _esValues = {
    "title": "Hola from ES",
    "hello": "Hola",
  };

  static Map<String, String> _frValues = {
    "title": "Bonjour depuis FR",
    "hello": "Bonjour",
  };
  static Map<String, Map<String, String>> _allValues = {
    "en": _enValues,
    "es": _esValues,
    "fr": _frValues,
  };

  static I18n of(BuildContext context) {
    return Localizations.of<I18n>(context, I18n);
  }

  String _getText(String key) {
    return _localizedValues[key] ?? '** $key not found';
  }

  static Future<I18n> load(Locale locale) async {
    I18n translations = new I18n(locale);
    _localizedValues = _allValues[locale.languageCode];
    return translations;
  }

  get currentLanguage => _locale.languageCode;
}

class I18nDelegate extends LocalizationsDelegate<I18n> {
  const I18nDelegate();

  @override
  bool isSupported(Locale locale) => ['en', 'es', 'fr'].contains(locale.languageCode);

  @override
  Future<I18n> load(Locale locale) => I18n.load(locale);

  @override
  bool shouldReload(I18nDelegate old) => false;
}
```

• **main.dart**
Configure supported locales in `supportedLocales`
```dart
// You need to configure supported locales here
// You need to configure Info.plist too
// Flappy doesn't support country. meh
final supportedLocales = [
  Locale("en", ""),
  Locale("en", ""),
  Locale("fr", ""),
];
```

```dart
class MyApp extends StatelessWidget {
  @override
  Widget build(BuildContext context) {
    return MaterialApp(
      title: 'Flutter Demo',
      localizationsDelegates: [
        // Init I18nDelegate here
        const I18nDelegate(),
        GlobalMaterialLocalizations.delegate,
        GlobalWidgetsLocalizations.delegate,
      ],
      // Assign supported locales
      supportedLocales: supportedLocales,
      theme: ThemeData(
        primarySwatch: Colors.blue,
      ),
      home: MyHomePage(title: 'Flutter Demo Home Page'),
    );
  }
}
```

• **Use key inside widget tree** 
```dart
Text(I18n.of(context).title),
Text(I18n.of(context).hello),
```

• **Swap language** 
```dart
// Swap locale at runtime
void _swapLanguage() {
  setState(() {
    I18n.load(Locale("fr", ""));
  });
}
```

Pro/Cons
===============
**Pros:**
- Classic CSV file format
- Support comma if you place string between quotation mark
- Non-developer can edit CSV files from common software like Google Sheets or Excel

**Cons:** 
- Doesn't support multiple language/country configurations (ex: `en-GB` and `en-US`)
- You need to execute command lines to regenerate files
